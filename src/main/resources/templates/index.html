<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Movie Explorer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<h1>Movie Explorer üé¨</h1>

<!-- Error Messages -->
<div th:if="${error}" class="error">
    <h3>‚ö†Ô∏è Error:</h3>
    <p th:text="${error}"></p>
</div>

<!-- Search Form -->
<form th:action="@{/search}" method="get">
    <label for="title">Enter movie title:</label>
    <input type="text" id="title" name="title" required 
           th:value="${movie?.title ?: ''}">
    <button type="submit">Search</button>
</form>

<!-- Movie Info -->
<div th:if="${movie != null}">
    <div class="movie-info">
        <h2 th:text="${movie.title}"></h2>
        <img th:src="${movie.poster}" alt="Movie Poster">
        <p><strong>Year:</strong> <span th:text="${movie.year}"></span></p>
        <p><strong>Director:</strong> <span th:text="${movie.director}"></span></p>
        <p><strong>Plot:</strong> <span th:text="${movie.plot}"></span></p>
        <p><strong>IMDb Rating:</strong> <span th:text="${movie.imdbRating}"></span></p>
    </div>

    <!-- AI Recommendation Trigger -->
    <form th:action="@{/recommend}" method="get">
        <input type="hidden" name="title" th:value="${movie.title}">
        <button type="submit" class="recommend-btn">Get AI Recommendations</button>
    </form>

    <!-- Clickable AI Recommendations -->
    <div th:if="${recommendationList != null}" class="recommendations">
        <h3>üé• AI Recommendations:</h3>
        <ul>
            <li th:each="rec : ${recommendationList}">
                <a th:href="@{/search(title=${#strings.replace(rec, '^\\d+\\.\\s*', '')})}"
                   th:text="${rec}"></a>
            </li>
        </ul>
    </div>
</div>

</body>
</html>
